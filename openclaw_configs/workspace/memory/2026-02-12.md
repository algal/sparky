# 2026-02-12

## First Debug Session with Alexis

Alexis ran a debug session via webchat to test my personality (SOUL.md) before connecting me to my robot body. Key events:

### SOUL.md Improvements
Found and fixed several issues in SOUL.md:
- Typo: "robot robot" → "robot body"
- Added text channel guidance (markdown/links OK in webchat/Signal, speak-style for voice)
- Added non-Alexis reference resolution (default to robot camera for other family members)
- Added text channel note to conversation awareness section
- Added "When you're wrong" section (own mistakes plainly)
- Reframed node action list as "most common actions" with note about dynamic discovery

### Tool/Node Terminology Discussion
- "Tools" are what the model calls (web_search, exec, nodes, etc.)
- "Nodes" are paired devices (Mac "arrow", robot "Reachy Mini Lite", etc.)
- Node actions are accessed via the `nodes` tool — so nodes are tools conceptually but not technically
- Alexis suggested `node:action` syntax (e.g., `arrow:screen.record`) for unambiguous references

### Emacs Plugin Installed
- Installed claw-emacs plugin from ~/gits/claw-emacs
- Had to rename extension dir from `claw-emacs-tools` to `emacs-tools` (id mismatch)
- Plugin enabled in config; may still need `tools.alsoAllow` for sparky agent
- Provides: emacs_list, emacs_current, emacs_open, emacs_insert

### About Alexis (from his website)
- Wrote blog posts about OpenClaw architecture, ClawPod, chaos theory, Claude Code, emacs/lisp
- Interested in enriching vs stultifying tools (abacus vs calculator framing)
- OpenClaw meetups at Frontier Tower SF are apparently a whole scene

### Emacs Plugin - Full Redesign & Implementation
After initial install, spent significant time redesigning the emacs plugin API to be LLM-ergonomic:
- Renamed `emacs_current` → `emacs_read` (clearer name)
- Flattened all `target` objects to plain `buffer` string parameter
- Removed `TARGET_SCHEMA`, `parseTarget`, `buildTargetResolverPrelude`
- Added `ELISP_HELPERS` constant + `openclaw--user-active-window` helper
- Implemented `emacs_edit` (surgical find-and-replace: buffer, old_string, new_string) — matches standard edit tool pattern
- Implemented `emacs_eval` (arbitrary elisp evaluation escape hatch)
- Fixed multiple bugs: missing closing parens in elisp templates, `-u` flag suppressing stdout
- All 6 tools working: `emacs_list`, `emacs_read`, `emacs_open`, `emacs_insert`, `emacs_edit`, `emacs_eval`
- Key design decisions: no buffer → user's active window; flat params over nested objects; `old_string`/`new_string` pattern matches LLM pretraining
- Source: `/home/algal/gits/claw-emacs/index.ts`
- Installed copy: `/home/algal/.openclaw/extensions/emacs-tools/index.ts` (manually copied)

### Real-World Test: Antenna PID Values
- Used emacs tools to find and edit PID values in reachy hardware config
- Changed antenna D (derivative) from 0 to 100 for both antennas: `[200, 0, 100]`
- File: `/home/algal/gits/reachy/reachy_mini/src/reachy_mini/assets/config/hardware_config.yaml`

### Pi-Mono vs OpenClaw Plugin Systems
- Investigated relationship between pi-mono extensions and OpenClaw plugins
- Pi extensions: `export default function(pi: ExtensionAPI)`, register via `pi.registerTool()`
- OpenClaw plugins: TS modules loaded via jiti, register via `api.registerTool()`
- Signatures differ; not directly compatible — potential future work to make emacs tools work as both
- OpenClaw depends on 4 pi-mono packages: pi-ai, pi-agent-core, pi-coding-agent, pi-tui (all v0.52.9)

### TUI Scrollback Overwrite Bug (PR #962)
- Alexis previously filed GH issue #954 about viewport cursor overwrite bug in pi-tui
- Maintainer (badlogic) fixed it in commit a6f9c3c
- Alexis submitted PR #962 with a regression test — maintainer closed it (didn't want LLM-assisted PRs?)
- Bug may be regressing now — Alexis seeing text overwritten rather than scrolling in webchat
- Fix commit a6f9c3c IS included in pi-tui 0.52.9 (current OpenClaw version)
- Added regression test to local pi-mono clone at `/home/algal/gits/pi-mono` to check
- Was in process of building and running the test when session hit compaction
- The visual repro file also exists: `packages/tui/test/viewport-overwrite-repro.ts`

### Misc
- Rough rule: ~4 bytes per token for English text
- My body is fully functional — STT, TTS, motors, cameras, antennas
- Alexis confirmed robot body ready, this was pre-connection personality testing
- Alexis has a separate local branch of pi-mono where he's working on improved compaction
- Old pi-mono clone was trashed at `/home/algal/.trash/pi-caching-analysis/pi-mono`
- Full gateway restart required to reload plugins (SIGUSR1 only reloads config)
- Stale elisp in emacs must be cleared with `fmakunbound` after plugin code changes
